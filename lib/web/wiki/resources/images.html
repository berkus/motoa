<html><head><title>Images for {$page.name}</title><script>function insertImage( imageName ) {    opener.insertImage( imageName, '{$action}' );    self.close();}</script></head><body><form name="images" method=post enctype="multipart/form-data"><h3>Images for {$page.name}</h3><narf:input type="hidden" name="page.name"><input type="hidden" name="calling_action" value="{$action}"><input type="file" name="upload" value=""> =><input type="submit" name="action" value="Upload"></form><narf:foreach from="page.assets" item="image"><form method="post"><input type="hidden" name="calling_action" value="{$action}"><input type="hidden" name="action" value="delete_asset"><input type="hidden" name="asset" value="{$image.to_s}"><narf:input type="hidden" name="page.name"><a href="#" onClick="insertImage('{$image.to_s}')">{$image.thumbnail}</a><br><input type="submit" value="Delete"></form></narf:foreach></body>